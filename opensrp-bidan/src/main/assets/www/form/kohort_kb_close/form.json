{
  "name": "penutupan_kb_reviewed",
  "title": "Penutupan KB",
  "sms_keyword": "Penutupan_KB",
  "default_language": "Bahasa",
  "instance": {
    "encounter_type": "Penutupan KB"
  },
  "version": "201610260223",
  "id_string": "Penutupan_KB",
  "type": "survey",
  "children": [
    {
      "instance": {
        "openmrs_entity_id": "encounter_start",
        "openmrs_entity": "encounter"
      },
      "type": "start",
      "name": "start"
    },
    {
      "instance": {
        "openmrs_entity_id": "encounter_date",
        "openmrs_entity": "encounter"
      },
      "type": "today",
      "name": "today"
    },
    {
      "type": "deviceid",
      "name": "deviceid"
    },
    {
      "type": "simserial",
      "name": "simserial"
    },
    {
      "type": "phonenumber",
      "name": "phonenumber"
    },
    {
      "type": "hidden",
      "name": "Province"
    },
    {
      "type": "hidden",
      "name": "District",
      "hint": {
        "Bahasa": "Inject from app"
      }
    },
    {
      "type": "hidden",
      "name": "Sub-district",
      "hint": {
        "Bahasa": "Inject from app"
      }
    },
    {
      "type": "hidden",
      "name": "Village",
      "hint": {
        "Bahasa": "Inject from app"
      }
    },
    {
      "type": "hidden",
      "name": "Sub-village",
      "hint": {
        "Bahasa": "Inject from app"
      }
    },
    {
      "type": "note",
      "name": "generated_note_name_13",
      "label": {
        "Bahasa": "Desa : ${Village}"
      }
    },
    {
      "type": "note",
      "name": "generated_note_name_14",
      "label": {
        "Bahasa": "Dusun : ${Sub-village}"
      }
    },
    {
      "bind": {
        "calculate": "${Village}"
      },
      "type": "hidden",
      "name": "existing_location",
      "instance": {
        "openmrs_entity_id": "location_id",
        "openmrs_entity": "encounter"
      }
    },
    {
      "bind": {
        "calculate": "${Province}"
      },
      "type": "calculate",
      "name": "provinsi",
      "instance": {
        "openmrs_entity": "person_address",
        "openmrs_entity_id": "stateProvince",
        "openmrs_entity_parent": "usual_residence"
      }
    },
    {
      "bind": {
        "calculate": "${District}"
      },
      "type": "calculate",
      "name": "kabupaten",
      "instance": {
        "openmrs_entity": "person_address",
        "openmrs_entity_id": "countyDistrict",
        "openmrs_entity_parent": "usual_residence"
      }
    },
    {
      "bind": {
        "calculate": "${Village}"
      },
      "type": "calculate",
      "name": "desa",
      "instance": {
        "openmrs_entity": "person_address",
        "openmrs_entity_id": "cityVillage",
        "openmrs_entity_parent": "usual_residence"
      }
    },
    {
      "bind": {
        "calculate": "${Sub-village}"
      },
      "type": "calculate",
      "name": "dusun",
      "instance": {
        "openmrs_entity": "person_address",
        "openmrs_entity_id": "address1",
        "openmrs_entity_parent": "usual_residence"
      }
    },
    {
      "bind": {
        "calculate": "${Sub-district}"
      },
      "type": "calculate",
      "name": "kecamatan",
      "instance": {
        "openmrs_entity": "person_address",
        "openmrs_entity_id": "address2",
        "openmrs_entity_parent": "usual_residence"
      }
    },
    {
      "name": "kb_close_reason",
      "hint": {
        "Bahasa": "Pilihlah salah satu alasan yang tersedia",
        "English": "Select one of reasons available"
      },
      "bind": {
        "required": "yes"
      },
      "label": {
        "Bahasa": "Alasan menutup KB",
        "English": "Reason for Family Planning's Closure"
      },
      "instance": {
        "openmrs_entity_id": "160417AAAAAAAAAAAAAAAAAAAAAAAAAA",
        "openmrs_entity": "Concept"
      },
      "type": "select one",
      "children": [
        {
          "instance": {
            "openmrs_code": "134612AAAAAAAAAAAAAAAAAAAAAAAAAA"
          },
          "name": "death_of_mother",
          "label": {
            "Bahasa": "Ibu meninggal",
            "English": "Maternal death"
          }
        },
        {
          "instance": {
            "openmrs_code": "160415AAAAAAAAAAAAAAAAAAAAAAAAAA"
          },
          "name": "permanent_relocation",
          "label": {
            "Bahasa": "Relokasi",
            "English": "Relocation"
          }
        },
        {
          "instance": {
            "openmrs_code": "163495AAAAAAAAAAAAAAAAAAAAAAAAAA"
          },
          "name": "dropout",
          "label": {
            "Bahasa": "Drop Out (DO)",
            "English": "Drop Out (DO)/Service Withdrawal"
          }
        },
        {
          "instance": {
            "openmrs_code": "160693AAAAAAAAAAAAAAAAAAAAAAAAAA"
          },
          "name": "gagal",
          "label": {
            "Bahasa": "Gagal (G)",
            "English": "Failure (F)"
          }
        },
        {
          "instance": {
            "openmrs_code": "120240AAAAAAAAAAAAAAAAAAAAAAAAAA"
          },
          "name": "komplikasi",
          "label": {
            "Bahasa": "Komplikasi",
            "English": "Complication"
          }
        }
      ]
    },
    {
      "name": "keterangan_do",
      "hint": {
        "Bahasa": "Berikan alasan dan penjelasan penyebab peserta KB Drop Out",
        "English": "Write the reason for Drop Out"
      },
      "bind": {
        "relevant": "${kb_close_reason} = 'dropout'"
      },
      "label": {
        "Bahasa": "Keterangan DO",
        "English": "Note of Drop Out"
      },
      "instance": {
        "openmrs_entity_id": "163513AAAAAAAAAAAAAAAAAAAAAAAAAA",
        "openmrs_entity": "Concept"
      },
      "type": "text"
    },
    {
      "name": "keterangan_gagal",
      "hint": {
        "Bahasa": "Berikan alasan dan penjelasan tambahan berkaitan peserta gagal KB",
        "English": "Write the reason for contraceptive failure"
      },
      "bind": {
        "relevant": "${kb_close_reason} = 'gagal'"
      },
      "label": {
        "Bahasa": "Keterangan Gagal",
        "English": "Note of Failure"
      },
      "instance": {
        "openmrs_entity_id": "160693AAAAAAAAAAAAAAAAAAAAAAAAAA",
        "openmrs_entity": "Concept"
      },
      "type": "select one",
      "children": [
        {
          "instance": {
            "openmrs_code": "1434AAAAAAAAAAAAAAAAAAAAAAAAAAAA"
          },
          "name": "ibu_hamil",
          "label": {
            "Bahasa": "Ibu hamil",
            "English": "Mother becomes pregnant"
          }
        },
        {
          "instance": {
            "openmrs_code": "1067AAAAAAAAAAAAAAAAAAAAAAAAAAAA"
          },
          "name": "tidak_ada_keterangan",
          "label": {
            "Bahasa": "Tidak ada keterangan",
            "English": "None"
          }
        },
        {
          "instance": {
            "openmrs_code": "5622AAAAAAAAAAAAAAAAAAAAAAAAAAAA"
          },
          "name": "lainnya",
          "label": {
            "Bahasa": "Lainnya",
            "English": "Other"
          }
        }
      ]
    },
    {
      "bind": {
        "relevant": "${keterangan_gagal} = 'lainnya'"
      },
      "type": "text",
      "instance": {
        "openmrs_entity_id": "5622AAAAAAAAAAAAAAAAAAAAAAAAAAAA",
        "openmrs_entity": "Concept"
      },
      "name": "keterangan_gagal_lainnya",
      "label": {
        "Bahasa": "Keterangan gagal lainnya",
        "English": "Other note of failure"
      }
    },
    {
      "name": "death_date",
      "hint": {
        "Bahasa": "Masukkan tanggal kematian",
        "English": "Enter the date of death"
      },
      "bind": {
        "jr:constraintMsg": {
          "Bahasa": "Tanggal kematian ibu hari ini atau hari-hari sebelumnya",
          "English": "Date of mother's death today or the days before"
        },
        "relevant": "${kb_close_reason} = 'death_of_mother'",
        "constraint": ".<=${today}"
      },
      "label": {
        "Bahasa": "Tanggal kematian",
        "English": "Date of death"
      },
      "instance": {
        "openmrs_entity_id": "1543AAAAAAAAAAAAAAAAAAAAAAAAAAAA",
        "openmrs_entity": "Concept"
      },
      "type": "date"
    },
    {
      "name": "place_of_death",
      "hint": {
        "Bahasa": "Tempat kematian ibu",
        "English": "Place of maternal death"
      },
      "bind": {
        "relevant": "${kb_close_reason} = 'death_of_mother'"
      },
      "label": {
        "Bahasa": "Tempat kematian",
        "English": "Place of death"
      },
      "instance": {
        "openmrs_entity_id": "1541AAAAAAAAAAAAAAAAAAAAAAAAAAAA",
        "openmrs_entity": "Concept"
      },
      "type": "select one",
      "children": [
        {
          "instance": {
            "openmrs_code": "1536AAAAAAAAAAAAAAAAAAAAAAAAAAAA"
          },
          "name": "Rumah sendiri/keluarga",
          "label": {
            "Bahasa": "Rumah sendiri/keluarga",
            "English": "Mother/family's house"
          }
        },
        {
          "instance": {
            "openmrs_code": "163512AAAAAAAAAAAAAAAAAAAAAAAAAA"
          },
          "name": "Polindes",
          "label": {
            "Bahasa": "Polindes",
            "English": "Community-based health post"
          }
        },
        {
          "instance": {
            "openmrs_code": "1588AAAAAAAAAAAAAAAAAAAAAAAAAAAA"
          },
          "name": "Pustu",
          "label": {
            "Bahasa": "Pustu",
            "English": "Sub-center"
          }
        },
        {
          "name": "Rumah bidan",
          "label": {
            "Bahasa": "Rumah bidan",
            "English": "Midwife's house"
          }
        },
        {
          "instance": {
            "openmrs_code": "159372AAAAAAAAAAAAAAAAAAAAAAAAAA"
          },
          "name": "Puskesmas",
          "label": {
            "Bahasa": "Puskesmas",
            "English": "Primary Health Center"
          }
        },
        {
          "instance": {
            "openmrs_code": "1601AAAAAAAAAAAAAAAAAAAAAAAAAAAA"
          },
          "name": "Dalam perjalanan ke fasilitas",
          "label": {
            "Bahasa": "Dalam perjalanan ke fasilitas",
            "English": "On the way to facility"
          }
        },
        {
          "instance": {
            "openmrs_code": "5622AAAAAAAAAAAAAAAAAAAAAAAAAAAA"
          },
          "name": "Lainnya",
          "label": {
            "Bahasa": "Lainnya",
            "English": "Other"
          }
        }
      ]
    },
    {
      "name": "address",
      "hint": {
        "Bahasa": "Masukkan alamat Ibu (Dusun)",
        "English": "Enter the mother’s address (dusun)"
      },
      "bind": {
        "relevant": "${kb_close_reason} = 'death_of_mother'"
      },
      "label": {
        "Bahasa": "Alamat Ibu (Dusun)",
        "English": "Mother’s address (dusun)"
      },
      "instance": {
        "openmrs_entity_id": "1354AAAAAAAAAAAAAAAAAAAAAAAAAAAA",
        "openmrs_entity": "Concept"
      },
      "type": "text"
    },
    {
      "name": "note_maternal_death_cause",
      "hint": {
        "Bahasa": "Masukkan penyebab kematian",
        "English": "Fill in the cause of maternal death"
      },
      "bind": {
        "relevant": "${kb_close_reason} = 'death_of_mother'"
      },
      "label": {
        "Bahasa": "Penyebab Kematian",
        "English": "Cause"
      },
      "instance": {
        "openmrs_entity_id": "160218AAAAAAAAAAAAAAAAAAAAAAAAAA",
        "openmrs_entity": "Concept"
      },
      "type": "text"
    },
    {
      "name": "birth_attendant",
      "hint": {
        "Bahasa": "Sebutkan siapa yang menolong ibu hamil saat bersalin",
        "English": "Write the one who assist mother's delivery"
      },
      "bind": {
        "relevant": "${kb_close_reason} = 'death_of_mother'"
      },
      "label": {
        "Bahasa": "Penolong Persalinan",
        "English": "Birth Attendant"
      },
      "instance": {
        "openmrs_entity_id": "1573AAAAAAAAAAAAAAAAAAAAAAAAAAAA",
        "openmrs_entity": "Concept"
      },
      "type": "select one",
      "children": [
        {
          "instance": {
            "openmrs_code": "1560AAAAAAAAAAAAAAAAAAAAAAAAAAAA"
          },
          "name": "keluarga",
          "label": {
            "Bahasa": "Keluarga (K)",
            "English": "Family"
          }
        },
        {
          "instance": {
            "openmrs_code": "1575AAAAAAAAAAAAAAAAAAAAAAAAAAAA"
          },
          "name": "dukun",
          "label": {
            "Bahasa": "Dukun (D)",
            "English": "Traditional Birth Attendant"
          }
        },
        {
          "instance": {
            "openmrs_code": "1578AAAAAAAAAAAAAAAAAAAAAAAAAAAA"
          },
          "name": "bidan",
          "label": {
            "Bahasa": "Bidan (B)",
            "English": "Midwife"
          }
        },
        {
          "instance": {
            "openmrs_code": "1574AAAAAAAAAAAAAAAAAAAAAAAAAAAA"
          },
          "name": "dr.umum",
          "label": {
            "Bahasa": "Dr.Umum (DU)",
            "English": "Doctor"
          }
        },
        {
          "instance": {
            "openmrs_code": "163489AAAAAAAAAAAAAAAAAAAAAAAAAA"
          },
          "name": "dr.spesialis",
          "label": {
            "Bahasa": "Dr.Spesialis (DS)",
            "English": "Obstectric and Gynecology Specialist (OGS)"
          }
        },
        {
          "instance": {
            "openmrs_code": "5622AAAAAAAAAAAAAAAAAAAAAAAAAAAA"
          },
          "name": "lain-lain",
          "label": {
            "Bahasa": "Lain-Lain (LN)",
            "English": "Others"
          }
        },
        {
          "instance": {
            "openmrs_code": "1107AAAAAAAAAAAAAAAAAAAAAAAAAAAA"
          },
          "name": "tidak_ada",
          "label": {
            "Bahasa": "Tidak Ada (TA)",
            "English": "None"
          }
        }
      ]
    },
    {
      "name": "referred",
      "hint": {
        "Bahasa": "Untuk mengetahui apakah ibu tersebut dirujuk ke fasilitas lain",
        "English": "Information whether the mother was referred to other facility or not"
      },
      "bind": {
        "relevant": "${kb_close_reason} = 'death_of_mother'"
      },
      "label": {
        "Bahasa": "Apakah ibu ini dirujuk?",
        "English": "Was this mother referred to other facility?"
      },
      "instance": {
        "openmrs_entity_id": "1648AAAAAAAAAAAAAAAAAAAAAAAAAAAA",
        "openmrs_entity": "Concept"
      },
      "type": "select one",
      "children": [
        {
          "instance": {
            "openmrs_code": "1065AAAAAAAAAAAAAAAAAAAAAAAAAAAA"
          },
          "name": "yes",
          "label": {
            "Bahasa": "Ya",
            "English": "Yes"
          }
        },
        {
          "instance": {
            "openmrs_code": "1066AAAAAAAAAAAAAAAAAAAAAAAAAAAA"
          },
          "name": "no",
          "label": {
            "Bahasa": "Tidak",
            "English": "No"
          }
        }
      ]
    },
    {
      "name": "referral_location",
      "hint": {
        "Bahasa": "Untuk mengetahui ibu dirujuk ke fasilitas mana",
        "English": "Information related to the location of mother's referral"
      },
      "bind": {
        "relevant": "${referred} = 'yes'"
      },
      "label": {
        "Bahasa": "Ibu dirujuk ke",
        "English": "Location of referral"
      },
      "instance": {
        "openmrs_entity_id": "161562AAAAAAAAAAAAAAAAAAAAAAAAAA",
        "openmrs_entity": "Concept"
      },
      "type": "text"
    },
    {
      "name": "prereferral_management",
      "hint": {
        "Bahasa": "Tuliskan tindakan perawatan yang diberikan kepada ibu sebelum dirujuk",
        "English": "Describe the care management provided for the mother prior to referral"
      },
      "bind": {
        "relevant": "${referred} = 'yes'"
      },
      "label": {
        "Bahasa": "Tindakan sebelum dirujuk",
        "English": "Pre-referral management"
      },
      "instance": {
        "openmrs_entity_id": "163104AAAAAAAAAAAAAAAAAAAAAAAAAA",
        "openmrs_entity": "Concept"
      },
      "type": "text"
    },
    {
      "instance": {
        "openmrs_entity_id": "n/a"
      },
      "label": {
        "Bahasa": "konfirmasi penutupan KB?",
        "English": "Confirmation of Family Planning Closure?"
      },
      "type": "select one",
      "children": [
        {
          "instance": {
            "openmrs_code": "n/a"
          },
          "name": "yes",
          "label": {
            "Bahasa": "Ya",
            "English": "Yes"
          }
        }
      ],
      "name": "confirm_kb_close"
    },
    {
      "default": "0",
      "instance": {
        "openmrs_entity_id": "374AAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
        "openmrs_entity": "Concept"
      },
      "type": "hidden",
      "name": "jenis_kontrasepsi"
    },
    {
      "instance": {
        "openmrs_entity_id": "encounter_end",
        "openmrs_entity": "encounter"
      },
      "type": "end",
      "name": "end"
    },
    {
      "control": {
        "bodyless": true
      },
      "type": "group",
      "children": [
        {
          "bind": {
            "readonly": "true()",
            "calculate": "concat('uuid:', uuid())"
          },
          "type": "calculate",
          "name": "instanceID"
        }
      ],
      "name": "meta"
    }
  ]
}